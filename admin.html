<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel - Kvone Coffee</title>
    <meta name="description" content="Quáº£n lÃ½ sáº£n pháº©m, Ä‘Æ¡n hÃ ng vÃ  thá»‘ng kÃª" />
    <link rel="icon" type="image/png" href="menu/icons/coffee.png" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/main.css" />
    <!-- Admin-specific font override -->
    <style>
      /* Override tiÃªu Ä‘á» tab admin Ä‘á»ƒ dÃ¹ng font Inter thay vÃ¬ Playfair Display */
      .admin-content h2 {
        font-family: "Inter", sans-serif;
        font-weight: 600;
      }
      /* Modal title trong admin cÅ©ng dÃ¹ng Inter */
      .admin-content .modal-title,
      #confirmModalBackdrop h3 {
        font-family: "Inter", sans-serif;
        font-weight: 600;
      }
    </style>
  </head>

  <body>
    <div class="admin-page">
      <!-- Admin Header -->
      <header class="admin-header">
        <div class="admin-header-container">
          <div style="display: flex; align-items: center; gap: var(--space-4)">
            <a href="index.html" style="color: var(--color-secondary)"
              >â† Vá» trang chá»§</a
            >
            <h1 class="admin-title">â˜• Admin Panel</h1>
          </div>
          <div style="display: flex; align-items: center; gap: var(--space-4)">
            <div
              class="user-menu"
              id="userMenu"
              style="background: rgba(255, 255, 255, 0.1)"
            >
              <div
                class="avatar"
                style="
                  background: var(--color-secondary);
                  color: var(--color-dark);
                "
              >
                A
              </div>
              <span class="user-name" style="color: white">Admin</span>
            </div>
            <button
              class="btn btn-ghost"
              style="color: white"
              onclick="logout()"
            >
              ğŸšª ÄÄƒng xuáº¥t
            </button>
          </div>
        </div>
      </header>

      <!-- Admin Content -->
      <div class="admin-container">
        <!-- Tabs -->
        <div class="admin-tabs">
          <div class="tabs">
            <button
              class="tab-btn active"
              data-tab="products"
              onclick="switchAdminTab('products')"
            >
              ğŸ“¦ Sáº£n pháº©m
            </button>
            <button
              class="tab-btn"
              data-tab="categories"
              onclick="switchAdminTab('categories')"
            >
              ğŸ“ Danh má»¥c
            </button>
            <button
              class="tab-btn"
              data-tab="sizes"
              onclick="switchAdminTab('sizes')"
            >
              ğŸ“ Size
            </button>
            <button
              class="tab-btn"
              data-tab="toppings"
              onclick="switchAdminTab('toppings')"
            >
              ğŸ§ Topping
            </button>
            <button
              class="tab-btn"
              data-tab="orders"
              onclick="switchAdminTab('orders')"
            >
              ğŸ“‹ ÄÆ¡n hÃ ng
            </button>
            <button
              class="tab-btn"
              data-tab="stats"
              onclick="switchAdminTab('stats')"
            >
              ğŸ“Š Thá»‘ng kÃª
            </button>
            <button
              class="tab-btn"
              data-tab="users"
              onclick="switchAdminTab('users')"
            >
              ğŸ‘¥ TÃ i khoáº£n
            </button>
            <button
              class="tab-btn"
              data-tab="inventory"
              onclick="switchAdminTab('inventory')"
            >
              ğŸ“¦ Kho
            </button>
            <button
              class="tab-btn"
              data-tab="employees"
              onclick="switchAdminTab('employees')"
            >
              ğŸ‘¤ NhÃ¢n viÃªn
            </button>
          </div>
        </div>

        <!-- Tab Content -->
        <div class="admin-content" id="adminContent">
          <!-- Ná»™i dung tab sáº½ Ä‘Æ°á»£c render báº±ng JavaScript -->
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="js/storage.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/products.js"></script>
    <script src="js/sizes.js"></script>
    <script src="js/toppings.js" ></script>
    <script src="js/cart.js" ></script>
    <script src="js/favorites.js" ></script>
    <script src="js/orders.js" ></script>
    <script src="js/categories.js" ></script>
    <!-- Inventory System (Phase 1) -->
    <script src="js/inventory/ingredients.js" ></script>
    <script src="js/inventory/recipes.js"></script>

    <script src="js/inventory/admin-inventory.js"></script>
    <!-- Employee System (Basic CRUD only) -->
    <script src="js/employees/employees.js"></script>
    <script src="js/employees/admin-employees.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/app.js"></script>
    <script>
      // Khá»Ÿi táº¡o trang
      document.addEventListener("DOMContentLoaded", function () {
        // Khá»Ÿi táº¡o dá»¯ liá»‡u
        initializeDefaultData();

        // Táº¡o toast container
        createToastContainer();

        // Kiá»ƒm tra quyá»n admin
        if (!isLoggedIn()) {
          window.location.href =
            "login.html?return=" + encodeURIComponent(window.location.href);
          return;
        }

        if (!isAdmin()) {
          showNotification("Báº¡n khÃ´ng cÃ³ quyá»n truy cáº­p trang nÃ y.", "error");
          setTimeout(() => {
            window.location.href = "index.html";
          }, 1500);
          return;
        }

        // Render thÃ´ng tin admin
        const user = getCurrentUser();
        const avatarEl = document.querySelector(".avatar");
        const nameEl = document.querySelector(".user-name");
        if (avatarEl) avatarEl.textContent = user.name.charAt(0).toUpperCase();
        if (nameEl) nameEl.textContent = user.name;

        // Khá»Ÿi táº¡o admin panel
        initAdminPanel();
      });

      // Táº¡o container cho toast
      function createToastContainer() {
        if (!document.querySelector(".toast-container")) {
          const container = document.createElement("div");
          container.className = "toast-container";
          document.body.appendChild(container);
        }
      }
    </script>
  </body>
</html>
